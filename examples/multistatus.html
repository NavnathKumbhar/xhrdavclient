<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8" />
  <script src="../closure-library/closure/goog/base.js" type="text/javascript"></script>
  <script src="../xhrdavclientdeps.js" type="text/javascript"></script>
<!--
  <script src="../xhrdavclient.js" type="text/javascript"></script>
-->
</head>
<body>
  <div id="sample"></div>
  <script type="text/javascript">
    goog.require('goog.net.XhrManager');
    goog.require('xhrdav.lib.Client');
    goog.require('xhrdav.lib.HttpStatus');
    goog.require('goog.dom.xml');

    goog.require('goog.debug.Console');
    goog.require('goog.debug.Logger');
  </script>
  <script type="text/javascript">
    var dir = '/mydav/'
    var dav = new xhrdav.lib.Client();
    var httpStatus = xhrdav.lib.HttpStatus;
    var httpStatusText = xhrdav.lib.HttpStatus.text;

    var uploadHandler = function(filename, statusCode, content, headers) {
//      console.log(content instanceof Document);
      var dumpData = goog.dom.xml.serialize(content);
//      console.log(dumpData);
      var uploadPath = goog.string.path.normalizePath(
        goog.string.path.join(dir, filename));
      dav.put(uploadPath, dumpData);  // upload response multi-status XML
    };

    // Current Directory list
    dav.propfind(dir, goog.partial(uploadHandler, 'multistatus_currentdir.xml'),
      {depth: 1}, function(e) { console.log(e); });

    // Only Directory
    dav.propfind(dir, goog.partial(uploadHandler, 'multistatus_dironly.xml'),
      null, function(e) { console.log(e); });
  </script>
</body>
</html>

