<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8" />
  <title>DavFs Function test</title>
  <script src="../closure-library/closure/goog/base.js" type="text/javascript"></script>
  <script src="../xhrdavclientdeps.js" type="text/javascript"></script>
  <script src="utils.js" type="text/javascript"></script>
  <script type="text/javascript">
    goog.require('goog.testing.AsyncTestCase');
    goog.require('goog.testing.jsunit');
    goog.require('goog.debug.Console');
    goog.require('goog.debug.Logger');
    goog.require('goog.json');
    goog.require('goog.async.ConditionalDelay');

    goog.require('goog.net.XhrManager');
    goog.require('xhrdav.lib.DavFs');
  </script>
</head>
<body>
  <script type="text/javascript">
    goog.debug.Console.autoInstall();
    goog.debug.Console.instance.setCapturing(true);

    // Prepare AsyncTest
    var asyncTestCase = goog.testing.AsyncTestCase.createAndInstall();
    var asyncContinue = function() {
      asyncTestCase.continueTesting();
    };

    function setUp() {
    }

    function tearDown() {
    }

    function testCreateXhrManager() {
      var testId = 'CreateXhrManager';
      var logger = goog.debug.Logger.getLogger(testId);

      var fs = xhrdav.lib.DavFs.getInstance();
      assertNotNullNorUndefined('Get XhrManager Instance?', fs.xhrMgr_);
      assertTrue('Is a goog.net.XhrManger?', fs.xhrMgr_ instanceof goog.net.XhrManager);
    }

    function testConnection() {
      var testId = 'Connection';
      var logger = goog.debug.Logger.getLogger(testId);

      var fs = xhrdav.lib.DavFs.getInstance();
      var conn = fs.getConnection();
      assertNotNullNorUndefined('Create Connection?', conn);
      var conn2 = fs.getConnection();
      assertEquals('Same Connection?', conn, conn2);
      var conn3 = fs.getConnection(true);
      assertNotEquals('Same Connection?', conn, conn3);
    };

    function testParseXmlSet() {
      var testId = 'ParseXmlSet';
      var logger = goog.debug.Logger.getLogger(testId);

      var fs = xhrdav.lib.DavFs.getInstance();
      var conn = fs.getConnection();
      assertTrue('Can ParseXml?', conn.canParseXml());
    }
  </script>
</body>
</html>
