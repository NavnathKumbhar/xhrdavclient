<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>XHR Implements XMLHttpRequest#sendAsBinary extension</title>
  <script src="../closure-library/closure/goog/base.js" type="text/javascript"></script>
  <script src="../xhrdavclientdeps.js" type="text/javascript"></script>
  <script src="utils.js" type="text/javascript"></script>
  <script type="text/javascript">
    goog.require('goog.testing.AsyncTestCase');
    goog.require('goog.testing.jsunit');
    goog.require('goog.debug.Console');
    goog.require('goog.debug.Logger');
    goog.require('goog.json');

    goog.require('xhrdav.lib.XhrIoExtBinary');
  </script>
</head>
<body>
  <script type="text/javascript">
    function setUp() {
    }

    function tearDown() {
    }

    function testCreateXhrExt() {
      var testId = 'testCreateXhrExt';
      var xhr = new XMLHttpRequest();
      assertNotNullNorUndefined('Created?', xhr);
      assertNotUndefined('Defined send?', xhr.send);
      assertNotUndefined('Defined sendAsBinary?', xhr.sendAsBinary);
    }

    function testCreateXhrIoExt() {
      var testId = 'testCreateInstance';
      var xhrIo = new xhrdav.lib.XhrIoExtBinary();
      var xhrIo2 = new goog.net.XhrIo();
      var xhr = new XMLHttpRequest();
      assertNotNullNorUndefined('Created?', xhrIo);
      assertNotUndefined('Defined send?', xhrIo.send);

      // private scope process
      xhrIo.xhr_ = xhrIo.createXhr();
      xhrIo2.xhr_ = xhrIo2.createXhr();
      assertNotEquals('Not Same Fn?', xhrIo2.xhr_.send, xhrIo.xhr_.send);
      assertEquals('Same Fn?', xhr.sendAsBinary, xhrIo.xhr_.send);
    }
  </script>
</body>
</html>
