<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8" />
  <title>Path functions test</title>
  <script src="../../closure-library/closure/goog/base.js" type="text/javascript"></script>
  <script src="../../lib/xhrdavclientdeps.js" type="text/javascript"></script>
  <script src="../utils.js" type="text/javascript"></script>
</head>
<body>
  <script type="text/javascript">
    goog.require('goog.testing.jsunit');
    goog.require('goog.debug.Console');
    goog.require('goog.debug.Logger');

    goog.require('xhrdav.utils.path');
  </script>

  <script type="text/javascript">
    goog.debug.Console.autoInstall();
    goog.debug.Console.instance.setCapturing(true);


    function testRemoveSlash() {
      var path1 = '/foo/bar/';
      var path2 = '/foo/bar';
      var path3 = '/';
      var path4 = '.';

      assertEquals(path1,
        '/foo/bar', xhrdav.utils.path.removeLastSlash(path1));
      assertEquals(path2,
        '/foo/bar', xhrdav.utils.path.removeLastSlash(path2));
      assertEquals(path3,
        '/', xhrdav.utils.path.removeLastSlash(path3));
      assertEquals(path4,
        '.', xhrdav.utils.path.removeLastSlash(path4));
    }

    function testAddLastSlash() {
      var path1 = '/foo/bar';
      var path2 = '/foo/bar/';

      assertEquals(path1,
        '/foo/bar/', xhrdav.utils.path.addLastSlash(path1));
      assertEquals(path2,
        '/foo/bar/', xhrdav.utils.path.addLastSlash(path2));
    }

    function testSplit() {
      var path1 = '/';
      var path2 = '/foo/bar/';
      var path3 = '/foo/bar';

      assertArrayEquals('path: ' + path1, ['/'], xhrdav.utils.path.split(path1));
      console.log(xhrdav.utils.path.split(path1));
      assertArrayEquals('path: ' + path2,
        ['foo', 'bar'], xhrdav.utils.path.split(path2));
      assertArrayEquals('path: ' + path3,
        ['foo', 'bar'], xhrdav.utils.path.split(path3));
    }
  </script>
</body>
</html>
