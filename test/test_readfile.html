<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8" />
  <title>ReadFile</title>
  <link media="all" href="../closure-library/closure/goog/css/common.css" type="text/css" rel="stylesheet" />
  <script src="../closure-library/closure/goog/base.js" type="text/javascript"></script>
  <script type="text/javascript">
    goog.require('goog.debug.Console');
    goog.require('goog.debug.Logger');
    goog.require('goog.net.XhrIo');
    goog.require('goog.object');
    goog.require('goog.Uri');
//    goog.require('goog.net.XhrManager');
  </script>
</head>
<body>
  <div id="data"></div>
  <script type="text/javascript">
    goog.debug.Console.autoInstall();
    goog.debug.Console.instance.setCapturing(true);

    var processRequest = function(e) {
      var xhr = e.target;
      var data = xhr.getResponse('while(1);');

      var el = document.getElementById('data');
      el.innerHTML = data;

      var logger = goog.debug.Logger.getLogger('readFile');
      logger.info("TYPEOF: " + goog.typeOf(data));
      logger.info("DUMP XHR: " + goog.debug.deepExpose(xhr));
    };
    goog.net.XhrIo.send('./テストファイル.txt', processRequest);
  </script>
</body>
</html>
